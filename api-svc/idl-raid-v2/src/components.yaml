openapi: 3.0.3
info:
  title: shared types
  version: 1.0.0
  description: >
    This file contains types that are broadly shared across the API.
    It is not expected to contain any endpoints.
paths:

components:
  schemas:
    CreateRaidSchemaV1:
      description: >
        This is the schema needed to create a Raid. It contains all of the properties of a Raid except for the id.
      type: object
      required: [ mintRequest, metadata ]
      properties:
        mintRequest:
          $ref: "#/components/schemas/MintRequestSchemaV1"
        metadata:
          $ref: "#/components/schemas/CreateMetadataSchemaV1"
    RaidSchemaV1:
      allOf:
        - $ref: "#/components/schemas/CreateRaidSchemaV1"
      description: > 
        All of the properties of CreateRaidSchemaV1 plus id.
      properties:
        mintRequest:
          $ref: "#/components/schemas/MintRequestSchemaV1"
        metadata:
          $ref: "components.yaml#/components/schemas/MetadataSchemaV1"
    CreateMetadataSchemaV1:
      type: object
      required: [ metadataSchema, titles, dates, contributors, access ]
      properties:
        id: { $ref: 'metadata-block.yaml#/components/schemas/IdBlock' }
        metadataSchema: { $ref: 'shared.yaml#/components/schemas/RaidoMetaschema' }
        titles:
          type: array
          items: { $ref: 'metadata-block.yaml#/components/schemas/TitleBlock' }
        dates: { $ref: 'metadata-block.yaml#/components/schemas/DatesBlock' }
        descriptions:
          type: array
          items: { $ref: 'metadata-block.yaml#/components/schemas/DescriptionBlock' }
        access: { $ref: 'metadata-block.yaml#/components/schemas/AccessBlock' }
        alternateUrls:
          type: array
          items: { $ref: 'metadata-block.yaml#/components/schemas/AlternateUrlBlock' }
        contributors:
          type: array
          items: { $ref: 'metadata-contributor-block.yaml#/components/schemas/ContributorBlock' }
        organisations:
          type: array
          items: { $ref: 'metadata-organisation-block.yaml#/components/schemas/OrganisationBlock' }
    MetadataSchemaV1:
      allOf:
        - $ref: "#/components/schemas/CreateMetadataSchemaV1"
      type: object
      required: [ id ]
    MintRequestSchemaV1:
      type: object
      description: >
        Raido data that doesn't belong on the raid metadata.
        ServicePoint Id means nothing in a RAID context - it's
        purely a Raido implementation detail (that may change).
      required: [ servicePointId ]
      properties:
        servicePointId: { $ref: 'shared.yaml#/components/schemas/SurrogateKey' }
    ErrorResponse:
      type: object
      required: [type, title, status]
      properties:
        type: { type: string }
        title: { type: string }

